<link rel="import" href="../../bower_components/polymer/polymer.html">
<!-- Additional Component Load -->
<link rel="import" href="../../bower_components/paper-ripple/paper-ripple.html">

<dom-module id="letter-card">
    <style>
    :host {
      display: inline-block;
      position: relative;
    }
    </style>
    <template>
      <div class="card-body layout horizontal center-justified">
        <span class="content-span"><content></content></span>
        <paper-ripple recenters></paper-ripple>
      </div>
      <audio style="display: none;" src="{{aacAudio}}" preload="none"></audio>
    </template>
</dom-module>
<script>
(function() {
  Polymer({
    is: 'letter-card',
    properties: {
      letter: {
        type: String,
        reflectToAttribute: true
      },
      currlang: {
        type: String,
        reflectToAttribute: true
      },
      uid: {
        type: String,
        reflectToAttribute: true
      },
      canOpus: {
        type: Boolean,
        value: false
      },
      regular: {
        type: Boolean,
        value: true
      },
      aacAudio: {
        type: String,
        observer: 'preloadAudio'
      },
      opusAudio: {
        type: String
      },
      hidden: {
        type: Boolean,
        notify: true
      }
    },
    listeners: {
      'tap': 'handleClick'
    },
    handleClick: function(e) {
      var jumbotronBox = document.querySelector("jumbotron-text");
      jumbotronBox.calcScore2(this.letter);
      var audio = Polymer.dom(this.root).querySelector("audio");
      console.log(audio);
      audio.play();
    },
    ready: function() {
    },
    preloadAudio: function() {
      //var audio = Polymer.dom(this.root).querySelector("audio");
      //audio.load();
    },
    computeAacAudio: function(letter, mylang) {
      if(letter === " " || mylang === undefined) return "";
      return "/assets/audio/"+ mylang +"/" + letter + ".m4a";
    },
    computeOpusAudio: function(letter, mylang) {
      // removing opus audio support for now
      if(this.canOpus && letter !== " " && mylang !== undefined) {
        return "/assets/audio/"+ mylang +"/" + letter + ".opus";
      } else {
        return '';
      }
    }
  });
})();
</script>