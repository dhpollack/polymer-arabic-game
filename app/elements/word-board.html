<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../services/word-service.html">

<dom-module id="word-board">
  <style>
  </style>
  <template>
    <div class="word-board"><span>{{myWord}}</span></div>
    <word-service id="wservice" currlang="{{langCode}}" warray="{{warray}}"></word-service>
  </template>
</dom-module>
<script>
(function() {
  Polymer({
    is: "word-board",
    properties: {
      langCode: {
        type: String,
        notify: true
      },
      myWord: {
        type: String,
        value: "",
        notify: true
      },
      wordArray: {
        type: Array,
        value: function() { return []; }
      },
      ranWordIndex: {
        type: Number
      }
    },
    listeners: {
      'new-words': 'setWords',
      'lang-code-changed': 'changeLanguage'
    },
    created: function() {
    },
    ready: function() {
    },
    changeLanguage: function(event) {
      this.$.wservice.currlang = this.langCode;
    },
    wordFilter: function() {
      this.ranWordIndex = Math.round(Math.random() * this.wordArray.length);
      var word = this.wordArray[this.ranWordIndex];
      this.fire("random-word-selected", { value: word[0], valueOhneAccent: word[1], langCode: this.langCode });
      this.myWord = word[0];


      var jumbotronBox = document.querySelector("jumbotron-text");
      var scoreBox = document.querySelector('score-board');
      var letterListBox = document.querySelector('letter-list');

      letterListBox.onNewWord2([word[0], word[1]]);
      scoreBox.checkWord = [word[0], word[1]];
      jumbotronBox.zielWort = word[0];

    },
    setWords: function() {
      var items = this.$.wservice.warray;
      if(items.length !== 0) {
        this.wordArray = items;
        this.wordFilter(items);
      }
      return items;
    }
  });
})();
</script>